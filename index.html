<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stopwatch Game – Hit 00:10.000</title>
    <style>
        body{
            font-family:'Segoe UI',sans-serif;
            display:flex;flex-direction:column;align-items:center;justify-content:center;
            height:100vh;margin:0;background:linear-gradient(135deg,#1e3c72,#2a5298);
            color:#fff;text-align:center;
        }
        .container{
            background:rgba(0,0,0,.4);padding:30px;border-radius:20px;
            box-shadow:0 10px 30px rgba(0,0,0,.5);max-width:420px;width:90%;
        }
        h1{margin-top:0;font-size:2em;}
        .stopwatch{
            font-size:3.5em;font-weight:bold;margin:20px 0;letter-spacing:2px;
            text-shadow:0 0 10px rgba(255,255,255,.5);
        }
        button{
            background:#ff4757;color:#fff;border:none;padding:15px 30px;
            font-size:1.2em;border-radius:50px;cursor:pointer;transition:.3s;
            box-shadow:0 5px 15px rgba(255,71,87,.4);margin:10px;
        }
        button:hover{background:#ff3742;transform:translateY(-3px);
            box-shadow:0 8px 20px rgba(255,71,87,.6);}
        button:active{transform:translateY(1px);}
        button:disabled{background:#636e72;cursor:not-allowed;transform:none;box-shadow:none;}
        .result{
            margin-top:20px;font-size:1.3em;min-height:50px;padding:10px;
            border-radius:10px;background:rgba(255,255,255,.1);
        }
        .perfect{color:#2ed573;font-weight:bold;animation:pulse 1s infinite;}
        .close{color:#ffa502;}
        .far{color:#ff6b6b;}
        @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}
        .instructions{margin:15px 0;font-size:1.1em;line-height:1.5;}
    </style>
</head>
<body>
    <div class="container">
        <h1>Stopwatch Challenge</h1>
        <p class="instructions">
            Click <strong>Start</strong> → stop <em>exactly</em> at <strong>00:10.000</strong>
        </p>

        <div class="stopwatch" id="display">00:00.000</div>

        <button id="startBtn">Start</button>
        <button id="stopBtn" disabled>Stop</button>

        <div class="result" id="result">
            Ready? Nail 10 seconds to the millisecond!
        </div>
    </div>

    <script>
        // ==== SETTINGS ====
        const TARGET_MS = 10000;               // 10 seconds
        const PERFECT_THRESHOLD = 50;          // ±50 ms → perfect
        const CLOSE_THRESHOLD   = 200;         // ±200 ms → close

        // ==== ELEMENTS ====
        const display = document.getElementById('display');
        const startBtn = document.getElementById('startBtn');
        const stopBtn  = document.getElementById('stopBtn');
        const result   = document.getElementById('result');

        // ==== TIMER STATE ====
        let startTime = 0;
        let elapsed   = 0;
        let interval  = null;
        let running   = false;

        // ==== DISPLAY FORMAT (mm:ss.mmm) – NO HOURS ====
        function format(ms){
            const totalSec = Math.floor(ms/1000);
            const m = String(Math.floor(totalSec/60)).padStart(2,'0');
            const s = String(totalSec%60).padStart(2,'0');
            const milli = String(ms%1000).padStart(3,'0');
            return `${m}:${s}.${milli}`;
        }

        function updateDisplay(){ display.textContent = format(elapsed); }

        // ==== START ====
        function start(){
            if(running) return;
            running = true;
            startTime = Date.now() - elapsed;
            startBtn.disabled = true;
            stopBtn.disabled  = false;
            result.textContent = 'Go! Stop at 00:10.000';
            result.className = 'result';

            interval = setInterval(() => {
                elapsed = Date.now() - startTime;
                updateDisplay();
            }, 7);
        }

        // ==== STOP & EVALUATE ====
        function stop(){
            if(!running) return;
            clearInterval(interval);
            running = false;
            startBtn.disabled = false;
            stopBtn.disabled  = true;

            const diff = Math.abs(elapsed - TARGET_MS);
            const diffSec = (diff/1000).toFixed(3);

            let msg = '', cls = 'result';
            if(diff <= PERFECT_THRESHOLD){
                msg = `PERFECT! ${format(elapsed)}<br>±${diff} ms`;
                cls += ' perfect';
            }else if(diff <= CLOSE_THRESHOLD){
                msg = `Close! ${format(elapsed)}<br>${diffSec}s off`;
                cls += ' close';
            }else{
                msg = `Stopped at ${format(elapsed)}<br>${diffSec}s off – try again!`;
                cls += ' far';
            }

            result.innerHTML = msg;
            result.className = cls;
        }

        // ==== RESET ====
        function reset(){
            clearInterval(interval);
            running = false; elapsed = 0; startTime = 0; interval = null;
            startBtn.disabled = false;
            stopBtn.disabled  = true;
            updateDisplay();
            result.textContent = 'Ready? Nail 10 seconds to the millisecond!';
            result.className = 'result';
        }

        // ==== EVENTS ====
        startBtn.addEventListener('click', () => { reset(); start(); });
        stopBtn.addEventListener('click', stop);

        // ==== INIT ====
        reset();
    </script>
</body>
</html>
